{"ast":null,"code":"import _regeneratorRuntime from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import Container from\"react-bootstrap/Container\";import Form from\"react-bootstrap/Form\";import{Helmet}from\"react-helmet-async\";import Loading from\"../components/Loading\";import ErrorMessageBox from\"../components/ErrorMessageBox\";import Button from\"react-bootstrap/Button\";import{useDispatch,useSelector}from\"react-redux\";import{adminUpdateProduct,updateProduct}from\"features/productsSlice\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ProductEdit=function ProductEdit(){var dispatch=useDispatch();var navigate=useNavigate();var params=useParams();// /product/:id\nvar productId=params.id;var _useSelector=useSelector(function(state){return state.products;}),updatedProductData=_useSelector.updatedProductData,error=_useSelector.error,status=_useSelector.status;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),slug=_useState4[0],setSlug=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),countInStock=_useState12[0],setCountInStock=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),brand=_useState14[0],setBrand=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),description=_useState16[0],setDescription=_useState16[1];useEffect(function(){setName(updatedProductData.name);setSlug(updatedProductData.slug);setPrice(updatedProductData.price);setImage(updatedProductData.image);setCategory(updatedProductData.category);setCountInStock(updatedProductData.countInStock);setBrand(updatedProductData.brand);setDescription(updatedProductData.description);dispatch(adminUpdateProduct(productId));},[productId,dispatch,updatedProductData.slug,updatedProductData.price,updatedProductData.image,updatedProductData.category,updatedProductData.countInStock,updatedProductData.brand,updatedProductData.description,updatedProductData.name]);var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var updateData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();updateData={_id:productId,name:name,slug:slug,price:price,image:image,category:category,brand:brand,countInStock:countInStock,description:description};dispatch(updateProduct({navigate:navigate,updateData:updateData}));case 3:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{className:\"small-container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[\"Edit Product \",productId]})}),status===\"pending\"?/*#__PURE__*/_jsx(Loading,{}):error?/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:name,onChange:function onChange(e){return setName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"slug\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Slug\"}),/*#__PURE__*/_jsx(Form.Control,{value:slug,onChange:function onChange(e){return setSlug(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Price\"}),/*#__PURE__*/_jsx(Form.Control,{value:price,onChange:function onChange(e){return setPrice(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"image\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Image File\"}),/*#__PURE__*/_jsx(Form.Control,{value:image,onChange:function onChange(e){return setImage(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"category\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsx(Form.Control,{value:category,onChange:function onChange(e){return setCategory(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"brand\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Brand\"}),/*#__PURE__*/_jsx(Form.Control,{value:brand,onChange:function onChange(e){return setBrand(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"countInStock\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Count In Stock\"}),/*#__PURE__*/_jsx(Form.Control,{value:countInStock,onChange:function onChange(e){return setCountInStock(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"description\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{value:description,as:\"textarea\",onChange:function onChange(e){return setDescription(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Update\"})})]})]});};export default ProductEdit;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","Container","Form","Helmet","Loading","ErrorMessageBox","Button","useDispatch","useSelector","adminUpdateProduct","updateProduct","ProductEdit","dispatch","navigate","params","productId","id","state","products","updatedProductData","error","status","name","setName","slug","setSlug","price","setPrice","image","setImage","category","setCategory","countInStock","setCountInStock","brand","setBrand","description","setDescription","submitHandler","e","preventDefault","updateData","_id","target","value"],"sources":["C:/tiedostot/coffees-shop-mern-stack/client/src/pages/AdminProductEdit.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport Loading from \"../components/Loading\";\r\nimport ErrorMessageBox from \"../components/ErrorMessageBox\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { adminUpdateProduct, updateProduct } from \"features/productsSlice\";\r\n\r\n\r\nconst ProductEdit = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const params = useParams(); // /product/:id\r\n  const { id: productId } = params;\r\n  const { updatedProductData, error, status } = useSelector(\r\n    (state) => state.products\r\n  );\r\n  const [name, setName] = useState(\"\");\r\n  const [slug, setSlug] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [countInStock, setCountInStock] = useState(\"\");\r\n  const [brand, setBrand] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setName(updatedProductData.name);\r\n    setSlug(updatedProductData.slug);\r\n    setPrice(updatedProductData.price);\r\n    setImage(updatedProductData.image);\r\n    setCategory(updatedProductData.category);\r\n    setCountInStock(updatedProductData.countInStock);\r\n    setBrand(updatedProductData.brand);\r\n    setDescription(updatedProductData.description);\r\n\r\n    dispatch(adminUpdateProduct(productId));\r\n  }, [productId, dispatch,updatedProductData.slug,updatedProductData.price,updatedProductData.image,updatedProductData.category,updatedProductData.countInStock, updatedProductData.brand, updatedProductData.description,updatedProductData.name]);\r\n\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n\tconst updateData = {\r\n\t\t_id: productId,\r\n\t\tname,\r\n\t\tslug,\r\n\t\tprice,\r\n\t\timage,\r\n\t\tcategory,\r\n\t\tbrand,\r\n\t\tcountInStock,\r\n\t\tdescription,\r\n\t  }\r\n\tdispatch(updateProduct({ navigate, updateData }))\r\n    \r\n  };\r\n\r\n  return (\r\n    <Container className=\"small-container\">\r\n      <Helmet>\r\n        <title>Edit Product {productId}</title>\r\n      </Helmet>\r\n\r\n      {status === \"pending\" ? (\r\n        <Loading></Loading>\r\n      ) : error ? (\r\n        <ErrorMessageBox variant=\"danger\">{error}</ErrorMessageBox>\r\n      ) : (\r\n        <Form onSubmit={submitHandler}>\r\n          <Form.Group className=\"mb-3\" controlId=\"name\">\r\n            <Form.Label>Name</Form.Label>\r\n            <Form.Control\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"slug\">\r\n            <Form.Label>Slug</Form.Label>\r\n            <Form.Control\r\n              value={slug}\r\n              onChange={(e) => setSlug(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"name\">\r\n            <Form.Label>Price</Form.Label>\r\n            <Form.Control\r\n              value={price}\r\n              onChange={(e) => setPrice(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"image\">\r\n            <Form.Label>Image File</Form.Label>\r\n            <Form.Control\r\n              value={image}\r\n              onChange={(e) => setImage(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"category\">\r\n            <Form.Label>Category</Form.Label>\r\n            <Form.Control\r\n              value={category}\r\n              onChange={(e) => setCategory(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"brand\">\r\n            <Form.Label>Brand</Form.Label>\r\n            <Form.Control\r\n              value={brand}\r\n              onChange={(e) => setBrand(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"countInStock\">\r\n            <Form.Label>Count In Stock</Form.Label>\r\n            <Form.Control\r\n              value={countInStock}\r\n              onChange={(e) => setCountInStock(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"description\">\r\n            <Form.Label>Description</Form.Label>\r\n            <Form.Control\r\n              value={description}\r\n\t\t\t  as=\"textarea\"\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <div className=\"mb-3\">\r\n            <Button type=\"submit\">Update</Button>\r\n          </div>\r\n        </Form>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProductEdit;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}