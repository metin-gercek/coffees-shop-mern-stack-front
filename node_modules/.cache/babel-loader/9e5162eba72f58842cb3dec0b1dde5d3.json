{"ast":null,"code":"import _regeneratorRuntime from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import{toast}from\"react-toastify\";import{getError}from\"utils\";import productService from\"./Services/productService\";var initialState={products:[],error:null,status:\"\",singleProduct:[],updatedProductData:[],updateData:[]};//get all products\nexport var productsFetch=createAsyncThunk(\"products/productsFetch\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return productService.productsFetch();case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);toast.error(getError(_context.t0));case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);})));// get one product\nexport var productFetch=createAsyncThunk(\"product/productFetch\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return productService.productFetch(id);case 3:return _context2.abrupt(\"return\",_context2.sent);case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);toast.error(getError(_context2.t0));case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function(_x){return _ref2.apply(this,arguments);};}());//remove product\nexport var adminRemoveProduct=createAsyncThunk(\"product/deleteProduct\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(product){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return productService.adminRemoveProduct(product);case 3:return _context3.abrupt(\"return\",_context3.sent);case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);toast.error(getError(_context3.t0));case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function(_x2){return _ref3.apply(this,arguments);};}());//admin create product\nexport var adminCreateProduct=createAsyncThunk(\"product/createProduct\",/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_ref4){var navigate;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:navigate=_ref4.navigate;if(!window.confirm(\"Are you sure to create?\")){_context4.next=11;break;}_context4.prev=2;_context4.next=5;return productService.adminCreateProduct({navigate:navigate});case 5:return _context4.abrupt(\"return\",_context4.sent);case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](2);toast.error(getError(_context4.t0));case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[2,8]]);}));return function(_x3){return _ref5.apply(this,arguments);};}());// admin update product\nexport var adminUpdateProduct=createAsyncThunk(\"product/adminUpdateProduct\",/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return productService.adminUpdateProduct(id);case 3:return _context5.abrupt(\"return\",_context5.sent);case 6:_context5.prev=6;_context5.t0=_context5[\"catch\"](0);toast.error(getError(_context5.t0));case 9:case\"end\":return _context5.stop();}}},_callee5,null,[[0,6]]);}));return function(_x4){return _ref6.apply(this,arguments);};}());export var updateProduct=createAsyncThunk(\"product/updateProduct\",/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_ref7){var navigate,updateData;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:navigate=_ref7.navigate,updateData=_ref7.updateData;_context6.prev=1;_context6.next=4;return productService.updateProduct({navigate:navigate,updateData:updateData});case 4:return _context6.abrupt(\"return\",_context6.sent);case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](1);toast.error(getError(_context6.t0));case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[1,7]]);}));return function(_x5){return _ref8.apply(this,arguments);};}());var productsSlice=createSlice({name:\"products\",initialState:initialState,reducers:{},extraReducers:function extraReducers(builder){builder.addCase(productsFetch.pending,function(state){state.status=\"pending\";}).addCase(productsFetch.fulfilled,function(state,action){state.status=\"success\";state.products=action.payload;}).addCase(productsFetch.rejected,function(state,action){state.status=\"rejected\";state.error=\"Data not loaded!!!\";}).addCase(adminCreateProduct.pending,function(state){state.status=\"pending\";}).addCase(adminCreateProduct.fulfilled,function(state,action){state.status=\"success\";state.singleProduct=action.payload;}).addCase(adminCreateProduct.rejected,function(state,action){state.status=\"rejected\";state.error=\"Data not loaded!!!\";}).addCase(productFetch.pending,function(state){state.status=\"pending\";}).addCase(productFetch.fulfilled,function(state,action){state.status=\"success\";state.singleProduct=action.payload;}).addCase(productFetch.rejected,function(state,action){state.status=\"rejected\";state.error=action.payload.message;}).addCase(adminUpdateProduct.pending,function(state){state.status=\"pending\";}).addCase(adminUpdateProduct.fulfilled,function(state,action){state.status=\"success\";state.updatedProductData=action.payload;}).addCase(adminUpdateProduct.rejected,function(state,action){state.status=\"rejected\";state.error=\"Data not loaded!!!\";}).addCase(updateProduct.pending,function(state){state.status=\"pending\";}).addCase(updateProduct.fulfilled,function(state,action){state.status=\"success\";state.updatedProductData=action.payload;}).addCase(updateProduct.rejected,function(state,action){state.status=\"rejected\";}).addCase(adminRemoveProduct.pending,function(state){state.status=\"pending\";}).addCase(adminRemoveProduct.fulfilled,function(state,action){state.status=\"success\";state.products=state.products.filter(function(item){return item._id!==action.payload.data;});}).addCase(adminRemoveProduct.rejected,function(state,action){state.status=\"rejected\";state.error=action.payload.message;});}});export default productsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","toast","getError","productService","initialState","products","error","status","singleProduct","updatedProductData","updateData","productsFetch","productFetch","id","adminRemoveProduct","product","adminCreateProduct","navigate","window","confirm","adminUpdateProduct","updateProduct","productsSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","message","filter","item","_id","data","reducer"],"sources":["C:/tiedostot/coffees-shop-mern-stack/client/src/features/productsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getError } from \"utils\";\r\nimport productService from \"./Services/productService\";\r\n\r\nconst initialState = {\r\n  products: [],\r\n  error: null,\r\n  status: \"\",\r\n  singleProduct: [],\r\n  updatedProductData: [],\r\n  updateData: [],\r\n};\r\n\r\n//get all products\r\nexport const productsFetch = createAsyncThunk(\r\n  \"products/productsFetch\",\r\n  async () => {\r\n    try {\r\n      return await productService.productsFetch();\r\n    } catch (error) {\r\n      toast.error(getError(error));\r\n    }\r\n  }\r\n);\r\n\r\n// get one product\r\nexport const productFetch = createAsyncThunk(\r\n  \"product/productFetch\",\r\n  async (id) => {\r\n    try {\r\n      return await productService.productFetch(id);\r\n    } catch (error) {\r\n      toast.error(getError(error));\r\n    }\r\n  }\r\n);\r\n\r\n//remove product\r\nexport const adminRemoveProduct = createAsyncThunk(\r\n  \"product/deleteProduct\",\r\n  async (product) => {\r\n    try {\r\n      return await productService.adminRemoveProduct(product);\r\n    } catch (error) {\r\n      toast.error(getError(error));\r\n    }\r\n  }\r\n);\r\n\r\n//admin create product\r\nexport const adminCreateProduct = createAsyncThunk(\r\n  \"product/createProduct\",\r\n  async ({ navigate }) => {\r\n    if (window.confirm(\"Are you sure to create?\")) {\r\n      try {\r\n        return await productService.adminCreateProduct({ navigate });\r\n      } catch (error) {\r\n        toast.error(getError(error));\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\n// admin update product\r\nexport const adminUpdateProduct = createAsyncThunk(\r\n  \"product/adminUpdateProduct\",\r\n  async (id) => {\r\n    try {\r\n      return await productService.adminUpdateProduct(id);\r\n    } catch (error) {\r\n      toast.error(getError(error));\r\n    }\r\n  }\r\n);\r\n\r\nexport const updateProduct = createAsyncThunk(\r\n  \"product/updateProduct\",\r\n  async ({ navigate, updateData }) => {\r\n    try {\r\n      return await productService.updateProduct({ navigate, updateData });\r\n    } catch (error) {\r\n      toast.error(getError(error));\r\n    }\r\n  }\r\n);\r\n\r\nconst productsSlice = createSlice({\r\n  name: \"products\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(productsFetch.pending, (state) => {\r\n        state.status = \"pending\";\r\n      })\r\n      .addCase(productsFetch.fulfilled, (state, action) => {\r\n        state.status = \"success\";\r\n        state.products = action.payload;\r\n      })\r\n      .addCase(productsFetch.rejected, (state, action) => {\r\n        state.status = \"rejected\";\r\n        state.error = \"Data not loaded!!!\";\r\n      })\r\n      .addCase(adminCreateProduct.pending, (state) => {\r\n        state.status = \"pending\";\r\n      })\r\n      .addCase(adminCreateProduct.fulfilled, (state, action) => {\r\n        state.status = \"success\";\r\n        state.singleProduct = action.payload;\r\n      })\r\n      .addCase(adminCreateProduct.rejected, (state, action) => {\r\n        state.status = \"rejected\";\r\n        state.error = \"Data not loaded!!!\";\r\n      })\r\n      .addCase(productFetch.pending, (state) => {\r\n        state.status = \"pending\";\r\n      })\r\n      .addCase(productFetch.fulfilled, (state, action) => {\r\n        state.status = \"success\";\r\n        state.singleProduct = action.payload;\r\n      })\r\n      .addCase(productFetch.rejected, (state, action) => {\r\n        state.status = \"rejected\";\r\n        state.error = action.payload.message;\r\n      })\r\n      .addCase(adminUpdateProduct.pending, (state) => {\r\n        state.status = \"pending\";\r\n      })\r\n      .addCase(adminUpdateProduct.fulfilled, (state, action) => {\r\n        state.status = \"success\";\r\n        state.updatedProductData = action.payload;\r\n      })\r\n      .addCase(adminUpdateProduct.rejected, (state, action) => {\r\n        state.status = \"rejected\";\r\n        state.error = \"Data not loaded!!!\";\r\n      })\r\n      .addCase(updateProduct.pending, (state) => {\r\n        state.status = \"pending\";\r\n      })\r\n      .addCase(updateProduct.fulfilled, (state, action) => {\r\n        state.status = \"success\";\r\n        state.updatedProductData = action.payload;\r\n      })\r\n      .addCase(updateProduct.rejected, (state, action) => {\r\n        state.status = \"rejected\";\r\n      })\r\n      .addCase(adminRemoveProduct.pending, (state) => {\r\n        state.status = \"pending\";\r\n      })\r\n      .addCase(adminRemoveProduct.fulfilled, (state, action) => {\r\n        state.status = \"success\";\r\n\r\n        state.products = state.products.filter(\r\n          (item) => item._id !== action.payload.data\r\n        );\r\n      })\r\n      .addCase(adminRemoveProduct.rejected, (state, action) => {\r\n        state.status = \"rejected\";\r\n        state.error = action.payload.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport default productsSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}