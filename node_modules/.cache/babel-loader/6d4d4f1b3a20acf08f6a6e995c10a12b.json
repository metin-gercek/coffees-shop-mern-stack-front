{"ast":null,"code":"import axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { getError } from \"utils\";\nconst API_URL = \"/api/v1/users/\"; // Register user\n\nconst register = async userData => {\n  const response = await axios.post(API_URL + \"signup\", userData);\n\n  if (response.data) {\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n  }\n\n  return response.data;\n}; // Login user\n\n\nconst login = async user => {\n  try {\n    const response = await axios.post(API_URL + \"signin\", user);\n\n    if (response.data) {\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\n    }\n\n    return response.data;\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; // Update User\n\n\nconst updateProfile = async user => {\n  try {\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\n    const response = await axios.put(`/api/v1/users/profile`, user, {\n      headers: {\n        authorization: `Bearer ${userLocal.token}`\n      }\n    });\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n    toast.success(\"User updated successfully\");\n    return response.data;\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; // Get users\n\n\nconst getAllUsers = async () => {\n  try {\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\n    const result = await axios.get(\"/api/v1/users\", {\n      headers: {\n        Authorization: `Bearer ${userLocal.token}`\n      }\n    });\n    return result === null || result === void 0 ? void 0 : result.data;\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; //update user\n\n\nconst adminUpdateUser = async id => {\n  try {\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\n    const result = await axios.get(API_URL + id, {\n      headers: {\n        Authorization: `Bearer ${userLocal.token}`\n      }\n    });\n    return result === null || result === void 0 ? void 0 : result.data;\n  } catch (error) {\n    toast.error(getError(error));\n  }\n};\n\nconst updateUser = async _ref => {\n  let {\n    navigate,\n    updateData\n  } = _ref;\n\n  try {\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\n    const result = await axios.put(API_URL + updateData._id, updateData, {\n      headers: {\n        Authorization: `Bearer ${userLocal.token}`\n      }\n    });\n    toast.success(\"User updated successfully\");\n    navigate(\"/admin/users\");\n    return result === null || result === void 0 ? void 0 : result.data;\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; //delete user\n\n\nconst adminRemoveUser = async user => {\n  try {\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\n    const result = await axios.delete(API_URL + user._id, {\n      headers: {\n        authorization: `Bearer ${userLocal.token}`\n      }\n    });\n    toast.success(\"Product Deleted Successfully\");\n    window.location.reload();\n    return result === null || result === void 0 ? void 0 : result.data;\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; //Dashboard summary for Admin\n\n\nconst summary = async () => {\n  try {\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\n    const response = await axios.put(\"/api/v1/orders/summary\", {\n      headers: {\n        authorization: `Bearer ${userLocal.token}`\n      }\n    });\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n    toast.success(\"User updated successfully\");\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; // Logout user\n\n\nconst logout = () => {\n  localStorage.clear();\n  window.location.reload();\n};\n\nconst authService = {\n  register,\n  logout,\n  login,\n  updateProfile,\n  summary,\n  getAllUsers,\n  adminUpdateUser,\n  updateUser,\n  adminRemoveUser\n};\nexport default authService;","map":{"version":3,"names":["axios","toast","getError","API_URL","register","userData","response","post","data","localStorage","setItem","JSON","stringify","login","user","error","updateProfile","userLocal","parse","getItem","put","headers","authorization","token","success","getAllUsers","result","get","Authorization","adminUpdateUser","id","updateUser","navigate","updateData","_id","adminRemoveUser","delete","window","location","reload","summary","logout","clear","authService"],"sources":["C:/tiedostot/integrify/fs12-fullstack/client/src/features/Services/authService.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getError } from \"utils\";\r\n\r\nconst API_URL = \"/api/v1/users/\";\r\n\r\n// Register user\r\nconst register = async (userData) => {\r\n  const response = await axios.post(API_URL + \"signup\", userData);\r\n\r\n  if (response.data) {\r\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n  }\r\n\r\n  return response.data;\r\n};\r\n\r\n// Login user\r\nconst login = async (user) => {\r\n  try {\r\n    const response = await axios.post(API_URL + \"signin\", user);\r\n\r\n    if (response.data) {\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n    }\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// Update User\r\nconst updateProfile = async (user) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const response = await axios.put(`/api/v1/users/profile`, user, {\r\n      headers: {\r\n        authorization: `Bearer ${userLocal.token}`,\r\n      },\r\n    });\r\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n    toast.success(\"User updated successfully\");\r\n    return response.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// Get users\r\n\r\nconst getAllUsers = async () => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.get(\"/api/v1/users\", {\r\n      headers: { Authorization: `Bearer ${userLocal.token}` },\r\n    });\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n//update user\r\n\r\nconst adminUpdateUser = async (id) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.get(API_URL + id, {\r\n      headers: { Authorization: `Bearer ${userLocal.token}` },\r\n    });\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\nconst updateUser = async ({ navigate, updateData }) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.put(API_URL + updateData._id, updateData, {\r\n      headers: { Authorization: `Bearer ${userLocal.token}` },\r\n    });\r\n    toast.success(\"User updated successfully\");\r\n    navigate(\"/admin/users\");\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n//delete user\r\n\r\nconst adminRemoveUser = async (user) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.delete(API_URL + user._id, {\r\n      headers: {\r\n        authorization: `Bearer ${userLocal.token}`,\r\n      },\r\n    });\r\n\r\n    toast.success(\"Product Deleted Successfully\");\r\n    window.location.reload();\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n//Dashboard summary for Admin\r\nconst summary = async () => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const response = await axios.put(\"/api/v1/orders/summary\", {\r\n      headers: {\r\n        authorization: `Bearer ${userLocal.token}`,\r\n      },\r\n    });\r\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n    toast.success(\"User updated successfully\");\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// Logout user\r\nconst logout = () => {\r\n  localStorage.clear();\r\n  window.location.reload();\r\n};\r\n\r\nconst authService = {\r\n  register,\r\n  logout,\r\n  login,\r\n  updateProfile,\r\n  summary,\r\n  getAllUsers,\r\n  adminUpdateUser,\r\n  updateUser,\r\n  adminRemoveUser,\r\n};\r\n\r\nexport default authService;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}