{"ast":null,"code":"import _regeneratorRuntime from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{toast}from\"react-toastify\";import{getError}from\"utils\";var API_URL=\"/api/v1/products/\";//get all products\nvar productsFetch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(API_URL);case 3:result=_context.sent;return _context.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);toast.error(getError(_context.t0));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function productsFetch(){return _ref.apply(this,arguments);};}();// get one product\nvar productFetch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(API_URL+\"product/\"+id);case 3:result=_context2.sent;return _context2.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);toast.error(getError(_context2.t0));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function productFetch(_x){return _ref2.apply(this,arguments);};}();//remove product\nvar adminRemoveProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(product){var userLocal,result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context3.next=4;return axios.delete(API_URL+product._id,{headers:{authorization:\"Bearer \".concat(userLocal.token)}});case 4:result=_context3.sent;toast.success(\"Product Deleted Successfully\");window.location.reload();return _context3.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);toast.error(getError(_context3.t0));case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function adminRemoveProduct(_x2){return _ref3.apply(this,arguments);};}();//admin create product\nvar adminCreateProduct=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_ref4){var navigate,userLocal,result;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:navigate=_ref4.navigate;_context4.prev=1;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context4.next=5;return axios.post(\"/api/v1/products\",{},{headers:{authorization:\"Bearer \".concat(userLocal.token)}});case 5:result=_context4.sent;toast.success(\"product created successfully\");navigate(\"/admin/product/\".concat(result===null||result===void 0?void 0:result.data.product._id));return _context4.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);toast.error(getError(_context4.t0));case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[1,11]]);}));return function adminCreateProduct(_x3){return _ref5.apply(this,arguments);};}();// admin update product\nvar adminUpdateProduct=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){var result;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.get(API_URL+\"product/\"+id);case 3:result=_context5.sent;return _context5.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);toast.error(getError(_context5.t0));case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function adminUpdateProduct(_x4){return _ref6.apply(this,arguments);};}();var updateProduct=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_ref7){var navigate,updateData,userLocal,result;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:navigate=_ref7.navigate,updateData=_ref7.updateData;_context6.prev=1;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context6.next=5;return axios.put(\"/api/v1/products/\"+updateData._id,updateData,{headers:{Authorization:\"Bearer \".concat(userLocal.token)}});case 5:result=_context6.sent;navigate(\"/admin/products\");return _context6.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](1);toast.error(getError(_context6.t0));case 13:case\"end\":return _context6.stop();}}},_callee6,null,[[1,10]]);}));return function updateProduct(_x5){return _ref8.apply(this,arguments);};}();var productService={productsFetch:productsFetch,productFetch:productFetch,adminRemoveProduct:adminRemoveProduct,adminCreateProduct:adminCreateProduct,adminUpdateProduct:adminUpdateProduct,updateProduct:updateProduct};export default productService;","map":{"version":3,"names":["axios","toast","getError","API_URL","productsFetch","get","result","data","error","productFetch","id","adminRemoveProduct","product","userLocal","JSON","parse","localStorage","getItem","delete","_id","headers","authorization","token","success","window","location","reload","adminCreateProduct","navigate","post","adminUpdateProduct","updateProduct","updateData","put","Authorization","productService"],"sources":["C:/tiedostot/coffees-shop-mern-stack/client/src/features/Services/productService.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getError } from \"utils\";\r\n\r\nconst API_URL = \"/api/v1/products/\";\r\n\r\n//get all products\r\nconst productsFetch = async () => {\r\n  try {\r\n    const result = await axios.get(API_URL);\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// get one product\r\nconst productFetch = async (id) => {\r\n  try {\r\n    const result = await axios.get(API_URL + \"product/\" + id);\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n//remove product\r\nconst adminRemoveProduct = async (product) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.delete(API_URL + product._id, {\r\n      headers: {\r\n        authorization: `Bearer ${userLocal.token}`,\r\n      },\r\n    });\r\n    toast.success(\"Product Deleted Successfully\");\r\n    window.location.reload();\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n//admin create product\r\nconst adminCreateProduct = async ({ navigate }) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.post(\r\n      \"/api/v1/products\",\r\n      {},\r\n      {\r\n        headers: {\r\n          authorization: `Bearer ${userLocal.token}`,\r\n        },\r\n      }\r\n    );\r\n    toast.success(\"product created successfully\");\r\n    navigate(`/admin/product/${result?.data.product._id}`);\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// admin update product\r\nconst adminUpdateProduct = async (id) => {\r\n  try {\r\n    const result = await axios.get(API_URL + \"product/\" + id);\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\nconst updateProduct = async ({ navigate, updateData }) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.put(\r\n      \"/api/v1/products/\" + updateData._id,\r\n      updateData,\r\n      {\r\n        headers: { Authorization: `Bearer ${userLocal.token}` },\r\n      }\r\n    );\r\n\r\n    navigate(\"/admin/products\");\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\nconst productService = {\r\n  productsFetch,\r\n  productFetch,\r\n  adminRemoveProduct,\r\n  adminCreateProduct,\r\n  adminUpdateProduct,\r\n  updateProduct,\r\n};\r\n\r\nexport default productService;\r\n"],"mappings":"kRAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,QAAT,KAAyB,OAAzB,CAEA,GAAMC,QAAO,CAAG,mBAAhB,CAEA;AACA,GAAMC,cAAa,4FAAG,sLAEGJ,MAAK,CAACK,GAAN,CAAUF,OAAV,CAFH,QAEZG,MAFY,+CAGXA,MAHW,SAGXA,MAHW,iBAGXA,MAAM,CAAEC,IAHG,0DAKlBN,KAAK,CAACO,KAAN,CAAYN,QAAQ,aAApB,EALkB,oEAAH,kBAAbE,cAAa,0CAAnB,CASA;AACA,GAAMK,aAAY,6FAAG,kBAAOC,EAAP,2KAEIV,MAAK,CAACK,GAAN,CAAUF,OAAO,CAAG,UAAV,CAAuBO,EAAjC,CAFJ,QAEXJ,MAFW,iDAGVA,MAHU,SAGVA,MAHU,iBAGVA,MAAM,CAAEC,IAHE,6DAKjBN,KAAK,CAACO,KAAN,CAAYN,QAAQ,cAApB,EALiB,sEAAH,kBAAZO,aAAY,6CAAlB,CASA;AACA,GAAME,mBAAkB,6FAAG,kBAAOC,OAAP,8JAEjBC,SAFiB,CAELC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAFK,wBAGFjB,MAAK,CAACkB,MAAN,CAAaf,OAAO,CAAGS,OAAO,CAACO,GAA/B,CAAoC,CACvDC,OAAO,CAAE,CACPC,aAAa,kBAAYR,SAAS,CAACS,KAAtB,CADN,CAD8C,CAApC,CAHE,QAGjBhB,MAHiB,gBAQvBL,KAAK,CAACsB,OAAN,CAAc,8BAAd,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GATuB,iCAUhBpB,MAVgB,SAUhBA,MAVgB,iBAUhBA,MAAM,CAAEC,IAVQ,+DAYvBN,KAAK,CAACO,KAAN,CAAYN,QAAQ,cAApB,EAZuB,uEAAH,kBAAlBS,mBAAkB,8CAAxB,CAgBA;AACA,GAAMgB,mBAAkB,6FAAG,6KAASC,QAAT,OAASA,QAAT,kBAEjBf,SAFiB,CAELC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAFK,wBAGFjB,MAAK,CAAC6B,IAAN,CACnB,kBADmB,CAEnB,EAFmB,CAGnB,CACET,OAAO,CAAE,CACPC,aAAa,kBAAYR,SAAS,CAACS,KAAtB,CADN,CADX,CAHmB,CAHE,QAGjBhB,MAHiB,gBAYvBL,KAAK,CAACsB,OAAN,CAAc,8BAAd,EACAK,QAAQ,0BAAmBtB,MAAnB,SAAmBA,MAAnB,iBAAmBA,MAAM,CAAEC,IAAR,CAAaK,OAAb,CAAqBO,GAAxC,EAAR,CAbuB,iCAchBb,MAdgB,SAchBA,MAdgB,iBAchBA,MAAM,CAAEC,IAdQ,+DAgBvBN,KAAK,CAACO,KAAN,CAAYN,QAAQ,cAApB,EAhBuB,uEAAH,kBAAlByB,mBAAkB,8CAAxB,CAoBA;AACA,GAAMG,mBAAkB,6FAAG,kBAAOpB,EAAP,2KAEFV,MAAK,CAACK,GAAN,CAAUF,OAAO,CAAG,UAAV,CAAuBO,EAAjC,CAFE,QAEjBJ,MAFiB,iDAGhBA,MAHgB,SAGhBA,MAHgB,iBAGhBA,MAAM,CAAEC,IAHQ,6DAKvBN,KAAK,CAACO,KAAN,CAAYN,QAAQ,cAApB,EALuB,sEAAH,kBAAlB4B,mBAAkB,8CAAxB,CASA,GAAMC,cAAa,6FAAG,wLAASH,QAAT,OAASA,QAAT,CAAmBI,UAAnB,OAAmBA,UAAnB,kBAEZnB,SAFY,CAEAC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAFA,wBAGGjB,MAAK,CAACiC,GAAN,CACnB,oBAAsBD,UAAU,CAACb,GADd,CAEnBa,UAFmB,CAGnB,CACEZ,OAAO,CAAE,CAAEc,aAAa,kBAAYrB,SAAS,CAACS,KAAtB,CAAf,CADX,CAHmB,CAHH,QAGZhB,MAHY,gBAWlBsB,QAAQ,CAAC,iBAAD,CAAR,CAXkB,iCAYXtB,MAZW,SAYXA,MAZW,iBAYXA,MAAM,CAAEC,IAZG,+DAclBN,KAAK,CAACO,KAAN,CAAYN,QAAQ,cAApB,EAdkB,uEAAH,kBAAb6B,cAAa,8CAAnB,CAkBA,GAAMI,eAAc,CAAG,CACrB/B,aAAa,CAAbA,aADqB,CAErBK,YAAY,CAAZA,YAFqB,CAGrBE,kBAAkB,CAAlBA,kBAHqB,CAIrBgB,kBAAkB,CAAlBA,kBAJqB,CAKrBG,kBAAkB,CAAlBA,kBALqB,CAMrBC,aAAa,CAAbA,aANqB,CAAvB,CASA,cAAeI,eAAf"},"metadata":{},"sourceType":"module"}