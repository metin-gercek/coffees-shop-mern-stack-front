{"ast":null,"code":"import React,{useEffect}from\"react\";import{Row,Col,Card,ListGroup}from\"react-bootstrap\";import Loading from\"components/Loading\";import ErrorMessageBox from\"components/ErrorMessageBox\";import{Link}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{getOrderById}from\"features/cartSlice\";import{useParams,useNavigate}from\"react-router-dom\";import{Button}from'react-bootstrap';import{orderDelivered}from\"features/cartSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderPageUser=function OrderPageUser(){var _orderSummary$shippin,_orderSummary$shippin2,_orderSummary$shippin3,_orderSummary$shippin4,_orderSummary$shippin5,_orderSummary$orderIt,_orderSummary$totalPr;var _useSelector=useSelector(function(state){return state.cart;}),orderSummary=_useSelector.orderSummary,error=_useSelector.error;var userLocal=JSON.parse(localStorage.getItem(\"user\"));var dispatch=useDispatch();var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;useEffect(function(){if(id){dispatch(getOrderById(id));}},[id,dispatch]);var deliverOrderHandler=function deliverOrderHandler(e){e.preventDefault();dispatch(orderDelivered({id:orderSummary._id,navigate:navigate}));};return/*#__PURE__*/_jsxs(\"div\",{children:[\" \",orderSummary.status===\"pending\"?/*#__PURE__*/_jsx(Loading,{}):error?/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"my-3\",children:[\"Order \",orderSummary._id]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(Card,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Shipping\"}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",(_orderSummary$shippin=orderSummary.shippingAddress)===null||_orderSummary$shippin===void 0?void 0:_orderSummary$shippin.fullName,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),\" \",(_orderSummary$shippin2=orderSummary.shippingAddress)===null||_orderSummary$shippin2===void 0?void 0:_orderSummary$shippin2.address,\",\",(_orderSummary$shippin3=orderSummary.shippingAddress)===null||_orderSummary$shippin3===void 0?void 0:_orderSummary$shippin3.city,\",\",\" \",(_orderSummary$shippin4=orderSummary.shippingAddress)===null||_orderSummary$shippin4===void 0?void 0:_orderSummary$shippin4.postalCode,\",\",(_orderSummary$shippin5=orderSummary.shippingAddress)===null||_orderSummary$shippin5===void 0?void 0:_orderSummary$shippin5.country]}),orderSummary.isDelivered?/*#__PURE__*/_jsxs(ErrorMessageBox,{variant:\"success\",children:[\"Delivered at \",orderSummary.deliveredAt]}):/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:\"Not Delivered\"})]})}),/*#__PURE__*/_jsx(Card,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Payment\"}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),\" \",orderSummary.paymentMethod]}),orderSummary.isPaid?/*#__PURE__*/_jsxs(ErrorMessageBox,{variant:\"success\",children:[\"Paid at \",orderSummary.paidAt]}):/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:\"Not Paid\"})]})}),/*#__PURE__*/_jsx(Card,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Items\"}),/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:(_orderSummary$orderIt=orderSummary.orderItems)===null||_orderSummary$orderIt===void 0?void 0:_orderSummary$orderIt.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),\" \",/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(item._id),children:[item.name.slice(0,21),\"...\"]})]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(\"span\",{children:item.quantity})}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$\",item.price]})]})},item._id);})})]})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Order Summary\"}),/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20AC\",(orderSummary.totalPrice*100/124).toFixed(2)]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax (24%)\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20AC\",(orderSummary.totalPrice*24/124).toFixed(2)]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Order Total\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20AC\",(_orderSummary$totalPr=orderSummary.totalPrice)===null||_orderSummary$totalPr===void 0?void 0:_orderSummary$totalPr.toFixed(2)]})})]})}),userLocal.isAdmin&&orderSummary.isPaid&&!orderSummary.isDelivered&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:deliverOrderHandler,children:\"Deliver Order\"})})})]})]})})})]})]})]});};export default OrderPageUser;","map":{"version":3,"names":["React","useEffect","Row","Col","Card","ListGroup","Loading","ErrorMessageBox","Link","useSelector","useDispatch","getOrderById","useParams","useNavigate","Button","orderDelivered","OrderPageUser","state","cart","orderSummary","error","userLocal","JSON","parse","localStorage","getItem","dispatch","navigate","id","deliverOrderHandler","e","preventDefault","_id","status","shippingAddress","fullName","address","city","postalCode","country","isDelivered","deliveredAt","paymentMethod","isPaid","paidAt","orderItems","map","item","image","name","slice","quantity","price","totalPrice","toFixed","isAdmin"],"sources":["C:/tiedostot/coffees-shop-mern-stack/client/src/pages/OrderPageUser.js"],"sourcesContent":["import React, {useEffect }from \"react\";\r\nimport { Row, Col, Card, ListGroup } from \"react-bootstrap\";\r\nimport Loading from \"components/Loading\";\r\nimport ErrorMessageBox from \"components/ErrorMessageBox\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSelector, useDispatch} from \"react-redux\";\r\nimport { getOrderById } from \"features/cartSlice\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { Button } from 'react-bootstrap';\r\nimport { orderDelivered } from \"features/cartSlice\";\r\n\r\n\r\n\r\nconst OrderPageUser = () => {\r\n  const { orderSummary, error } = useSelector((state) => state.cart);\r\n  const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      dispatch(getOrderById(id));\r\n    }\r\n  }, [id, dispatch]);\r\n\r\n  const deliverOrderHandler = (e) =>{\r\n\te.preventDefault();\r\n\tdispatch(orderDelivered({id: orderSummary._id, navigate}))\r\n\t\r\n  }\r\n  return (\r\n    <div>\r\n      {\" \"}\r\n      {orderSummary.status === \"pending\" ? (\r\n        <Loading></Loading>\r\n      ) : error ? (\r\n        <ErrorMessageBox variant=\"danger\">{error}</ErrorMessageBox>\r\n      ) : (\r\n        <div>\r\n         \r\n          <h1 className=\"my-3\">Order {orderSummary._id}</h1>\r\n          <Row>\r\n            <Col md={8}>\r\n              <Card className=\"mb-3\">\r\n                <Card.Body>\r\n                  <Card.Title>Shipping</Card.Title>\r\n                  <Card.Text>\r\n                    <strong>Name:</strong> {orderSummary.shippingAddress?.fullName}{\" \"}\r\n                    <br />\r\n                    <strong>Address: </strong> {orderSummary.shippingAddress?.address},\r\n                    {orderSummary.shippingAddress?.city},{\" \"}\r\n                    {orderSummary.shippingAddress?.postalCode},\r\n                    {orderSummary.shippingAddress?.country}\r\n                  </Card.Text>\r\n                  {orderSummary.isDelivered ? (\r\n                    <ErrorMessageBox variant=\"success\">\r\n                      Delivered at {orderSummary.deliveredAt}\r\n                    </ErrorMessageBox>\r\n                  ) : (\r\n                    <ErrorMessageBox variant=\"danger\">\r\n                      Not Delivered\r\n                    </ErrorMessageBox>\r\n                  )}\r\n                </Card.Body>\r\n              </Card>\r\n              <Card className=\"mb-3\">\r\n                <Card.Body>\r\n                  <Card.Title>Payment</Card.Title>\r\n                  <Card.Text>\r\n                    <strong>Method:</strong> {orderSummary.paymentMethod}\r\n                  </Card.Text>\r\n                  {orderSummary.isPaid ? (\r\n                    <ErrorMessageBox variant=\"success\">\r\n                      Paid at {orderSummary.paidAt}\r\n                    </ErrorMessageBox>\r\n                  ) : (\r\n                    <ErrorMessageBox variant=\"danger\">Not Paid</ErrorMessageBox>\r\n                  )}\r\n                </Card.Body>\r\n              </Card>\r\n\r\n              <Card className=\"mb-3\">\r\n                <Card.Body>\r\n                  <Card.Title>Items</Card.Title>\r\n                  <ListGroup variant=\"flush\">\r\n                    {orderSummary.orderItems?.map((item) => (\r\n                      <ListGroup.Item key={item._id}>\r\n                        <Row className=\"align-items-center\">\r\n                          <Col md={6}>\r\n                            <img\r\n                              src={item.image}\r\n                              alt={item.name}\r\n                              className=\"img-fluid rounded img-thumbnail\"\r\n                            ></img>{\" \"}\r\n                            <Link to={`/product/${item._id}`}>\r\n                              {item.name.slice(0, 21)}...\r\n                            </Link>\r\n                          </Col>\r\n                          <Col md={3}>\r\n                            <span>{item.quantity}</span>\r\n                          </Col>\r\n                          <Col md={3}>${item.price}</Col>\r\n                        </Row>\r\n                      </ListGroup.Item>\r\n                    ))}\r\n                  </ListGroup>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Card className=\"mb-3\">\r\n                <Card.Body>\r\n                  <Card.Title>Order Summary</Card.Title>\r\n                  <ListGroup variant=\"flush\">\r\n                    <ListGroup.Item>\r\n                      <Row>\r\n                        <Col>Items</Col>\r\n                        <Col>€{((orderSummary.totalPrice * 100) / 124).toFixed(2)}</Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n                    <ListGroup.Item>\r\n                      <Row>\r\n                        <Col>Tax (24%)</Col>\r\n                        <Col>€{((orderSummary.totalPrice * 24) / 124).toFixed(2)}</Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n                    <ListGroup.Item>\r\n                      <Row>\r\n                        <Col>\r\n                          <strong> Order Total</strong>\r\n                        </Col>\r\n                        <Col>\r\n                          <strong>€{orderSummary.totalPrice?.toFixed(2)}</strong>\r\n                        </Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n\t\t\t\t\t{userLocal.isAdmin && orderSummary.isPaid && !orderSummary.isDelivered && (\r\n                  <ListGroup.Item>\r\n                    <div className=\"d-grid\">\r\n                      <Button type=\"button\" onClick={deliverOrderHandler}>\r\n                        Deliver Order\r\n                      </Button>\r\n                    </div>\r\n                  </ListGroup.Item>\r\n                )}\r\n                  </ListGroup>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderPageUser;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}