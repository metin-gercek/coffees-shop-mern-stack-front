{"ast":null,"code":"import _regeneratorRuntime from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import Container from\"react-bootstrap/Container\";import Form from\"react-bootstrap/Form\";import{Helmet}from\"react-helmet-async\";import Loading from\"../components/Loading\";import ErrorMessageBox from\"../components/ErrorMessageBox\";import Button from\"react-bootstrap/Button\";import{useDispatch,useSelector}from\"react-redux\";import{adminUpdateUser,updateUser}from\"features/authSlice\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var UserEdit=function UserEdit(){var dispatch=useDispatch();var navigate=useNavigate();var params=useParams();// /product/:id\nvar userId=params.id;var _useSelector=useSelector(function(state){return state.auth;}),updatedUserData=_useSelector.updatedUserData,isError=_useSelector.isError,isLoading=_useSelector.isLoading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setIsAdmin=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isBanned=_useState8[0],setIsBanned=_useState8[1];useEffect(function(){setName(updatedUserData.name);setEmail(updatedUserData.email);setIsAdmin(updatedUserData.isAdmin);setIsBanned(updatedUserData.isBanned);dispatch(adminUpdateUser(userId));},[userId,dispatch,updatedUserData.name,updatedUserData.email,updatedUserData.isAdmin,updatedUserData.isBanned]);var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var updateData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();updateData={_id:userId,name:name,email:email,isAdmin:isAdmin,isBanned:isBanned};dispatch(updateUser({navigate:navigate,updateData:updateData}));case 3:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{className:\"small-container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[\"Edit User $\",userId]})}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Edit User \",userId]}),isLoading?/*#__PURE__*/_jsx(Loading,{}):isError?/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:isError}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:name,onChange:function onChange(e){return setName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{value:email,type:\"email\",onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(Form.Check,{className:\"mb-3\",type:\"checkbox\",id:\"isAdmin\",label:\"isAdmin\",checked:isAdmin,onChange:function onChange(e){return setIsAdmin(e.target.checked);}}),/*#__PURE__*/_jsx(Form.Check,{className:\"mb-3\",type:\"checkbox\",id:\"isBanned\",label:\"isBanned\",checked:isBanned,onChange:function onChange(e){return setIsBanned(e.target.checked);}}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Update\"})})]})]});};export default UserEdit;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","Container","Form","Helmet","Loading","ErrorMessageBox","Button","useDispatch","useSelector","adminUpdateUser","updateUser","UserEdit","dispatch","navigate","params","userId","id","state","auth","updatedUserData","isError","isLoading","name","setName","email","setEmail","isAdmin","setIsAdmin","isBanned","setIsBanned","submitHandler","e","preventDefault","updateData","_id","target","value","checked"],"sources":["C:/tiedostot/coffees-shop-mern-stack/client/src/pages/UserEdit.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport Loading from \"../components/Loading\";\r\nimport ErrorMessageBox from \"../components/ErrorMessageBox\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { adminUpdateUser, updateUser } from \"features/authSlice\";\r\n\r\nconst UserEdit = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const params = useParams(); // /product/:id\r\n  const { id: userId } = params;\r\n  const { updatedUserData, isError, isLoading } = useSelector(\r\n    (state) => state.auth\r\n  );\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [isBanned, setIsBanned] = useState(false);\r\n \r\n\r\n  useEffect(() => {\r\n    setName(updatedUserData.name);\r\n    setEmail(updatedUserData.email);\r\n    setIsAdmin(updatedUserData.isAdmin);\r\n    setIsBanned(updatedUserData.isBanned);\r\n    \r\n\r\n    dispatch(adminUpdateUser(userId));\r\n  }, [\r\n    userId,\r\n    dispatch,\r\n\tupdatedUserData.name,\r\n\tupdatedUserData.email,\r\n\tupdatedUserData.isAdmin,\r\n\tupdatedUserData.isBanned\r\n  ]);\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    const updateData = {\r\n      _id: userId,\r\n      name,\r\n      email,\r\n      isAdmin,\r\n      isBanned,\r\n     \r\n    };\r\n    dispatch(updateUser({ navigate, updateData }));\r\n  };\r\n  return (\r\n\t<Container className=\"small-container\">\r\n      <Helmet>\r\n        <title>Edit User ${userId}</title>\r\n      </Helmet>\r\n      <h1>Edit User {userId}</h1>\r\n\r\n      {isLoading ? (\r\n        <Loading></Loading>\r\n      ) : isError ? (\r\n        <ErrorMessageBox variant=\"danger\">{isError}</ErrorMessageBox>\r\n      ) : (\r\n        <Form onSubmit={submitHandler}>\r\n          <Form.Group className=\"mb-3\" controlId=\"name\">\r\n            <Form.Label>Name</Form.Label>\r\n            <Form.Control\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"email\">\r\n            <Form.Label>Email</Form.Label>\r\n            <Form.Control\r\n              value={email}\r\n              type=\"email\"\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Check\r\n            className=\"mb-3\"\r\n            type=\"checkbox\"\r\n            id=\"isAdmin\"\r\n            label=\"isAdmin\"\r\n            checked={isAdmin}\r\n            onChange={(e) => setIsAdmin(e.target.checked)}\r\n          />\r\n          <Form.Check\r\n            className=\"mb-3\"\r\n            type=\"checkbox\"\r\n            id=\"isBanned\"\r\n            label=\"isBanned\"\r\n            checked={isBanned}\r\n            onChange={(e) => setIsBanned(e.target.checked)}\r\n          />\r\n\r\n          <div className=\"mb-3\">\r\n            <Button type=\"submit\">\r\n              Update\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default UserEdit;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}