{"ast":null,"code":"import _regeneratorRuntime from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/tiedostot/coffees-shop-mern-stack/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{toast}from\"react-toastify\";import{getError}from\"utils\";var API_URL=\"/api/v1/users/\";// Register user\nvar register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userData){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(API_URL+\"signup\",userData);case 3:response=_context.sent;if(response.data){localStorage.setItem(\"user\",JSON.stringify(response.data));}return _context.abrupt(\"return\",response.data);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);toast.error(getError(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function register(_x){return _ref.apply(this,arguments);};}();// Login user\nvar login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(user){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(API_URL+\"signin\",user);case 3:response=_context2.sent;if(response.data){localStorage.setItem(\"user\",JSON.stringify(response.data));}return _context2.abrupt(\"return\",response.data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);toast.error(getError(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function login(_x2){return _ref2.apply(this,arguments);};}();// Update User\nvar updateProfile=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(user){var userLocal,response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context3.next=4;return axios.put(\"/api/v1/users/profile\",user,{headers:{authorization:\"Bearer \".concat(userLocal.token)}});case 4:response=_context3.sent;localStorage.setItem(\"user\",JSON.stringify(response.data));toast.success(\"User updated successfully\");return _context3.abrupt(\"return\",response.data);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);toast.error(getError(_context3.t0));case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function updateProfile(_x3){return _ref3.apply(this,arguments);};}();// Get users\nvar getAllUsers=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var userLocal,result;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context4.next=4;return axios.get(\"/api/v1/users\",{headers:{Authorization:\"Bearer \".concat(userLocal.token)}});case 4:result=_context4.sent;return _context4.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);toast.error(getError(_context4.t0));case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function getAllUsers(){return _ref4.apply(this,arguments);};}();//update user\nvar adminUpdateUser=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){var userLocal,result;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context5.next=4;return axios.get(API_URL+id,{headers:{Authorization:\"Bearer \".concat(userLocal.token)}});case 4:result=_context5.sent;return _context5.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);toast.error(getError(_context5.t0));case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[0,8]]);}));return function adminUpdateUser(_x4){return _ref5.apply(this,arguments);};}();var updateUser=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_ref6){var navigate,updateData,userLocal,result;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:navigate=_ref6.navigate,updateData=_ref6.updateData;_context6.prev=1;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context6.next=5;return axios.put(API_URL+updateData._id,updateData,{headers:{Authorization:\"Bearer \".concat(userLocal.token)}});case 5:result=_context6.sent;toast.success(\"User updated successfully\");navigate(\"/admin/users\");return _context6.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);toast.error(getError(_context6.t0));case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[1,11]]);}));return function updateUser(_x5){return _ref7.apply(this,arguments);};}();//delete user\nvar adminRemoveUser=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(user){var userLocal,result;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context7.next=4;return axios.delete(API_URL+user._id,{headers:{authorization:\"Bearer \".concat(userLocal.token)}});case 4:result=_context7.sent;toast.success(\"Product Deleted Successfully\");window.location.reload();return _context7.abrupt(\"return\",result===null||result===void 0?void 0:result.data);case 10:_context7.prev=10;_context7.t0=_context7[\"catch\"](0);toast.error(getError(_context7.t0));case 13:case\"end\":return _context7.stop();}}},_callee7,null,[[0,10]]);}));return function adminRemoveUser(_x6){return _ref8.apply(this,arguments);};}();//Dashboard summary for Admin\nvar summary=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){var userLocal,response;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;userLocal=JSON.parse(localStorage.getItem(\"user\"));_context8.next=4;return axios.put(\"/api/v1/orders/summary\",{headers:{authorization:\"Bearer \".concat(userLocal.token)}});case 4:response=_context8.sent;localStorage.setItem(\"user\",JSON.stringify(response.data));toast.success(\"User updated successfully\");_context8.next=12;break;case 9:_context8.prev=9;_context8.t0=_context8[\"catch\"](0);toast.error(getError(_context8.t0));case 12:case\"end\":return _context8.stop();}}},_callee8,null,[[0,9]]);}));return function summary(){return _ref9.apply(this,arguments);};}();// Logout user\nvar logout=function logout(){localStorage.clear();window.location.reload();};var authService={register:register,logout:logout,login:login,updateProfile:updateProfile,summary:summary,getAllUsers:getAllUsers,adminUpdateUser:adminUpdateUser,updateUser:updateUser,adminRemoveUser:adminRemoveUser};export default authService;","map":{"version":3,"names":["axios","toast","getError","API_URL","register","userData","post","response","data","localStorage","setItem","JSON","stringify","error","login","user","updateProfile","userLocal","parse","getItem","put","headers","authorization","token","success","getAllUsers","get","Authorization","result","adminUpdateUser","id","updateUser","navigate","updateData","_id","adminRemoveUser","delete","window","location","reload","summary","logout","clear","authService"],"sources":["C:/tiedostot/coffees-shop-mern-stack/client/src/features/Services/authService.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getError } from \"utils\";\r\n\r\nconst API_URL = \"/api/v1/users/\";\r\n\r\n// Register user\r\nconst register = async (userData) => {\r\n  try {\r\n    const response = await axios.post(API_URL + \"signup\", userData);\r\n\r\n    if (response.data) {\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n    }\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n\ttoast.error(getError(error));\r\n  }\r\n};\r\n\r\n// Login user\r\nconst login = async (user) => {\r\n  try {\r\n    const response = await axios.post(API_URL + \"signin\", user);\r\n\r\n    if (response.data) {\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n    }\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// Update User\r\nconst updateProfile = async (user) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const response = await axios.put(`/api/v1/users/profile`, user, {\r\n      headers: {\r\n        authorization: `Bearer ${userLocal.token}`,\r\n      },\r\n    });\r\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n    toast.success(\"User updated successfully\");\r\n    return response.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// Get users\r\n\r\nconst getAllUsers = async () => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.get(\"/api/v1/users\", {\r\n      headers: { Authorization: `Bearer ${userLocal.token}` },\r\n    });\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n//update user\r\n\r\nconst adminUpdateUser = async (id) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.get(API_URL + id, {\r\n      headers: { Authorization: `Bearer ${userLocal.token}` },\r\n    });\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\nconst updateUser = async ({ navigate, updateData }) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.put(API_URL + updateData._id, updateData, {\r\n      headers: { Authorization: `Bearer ${userLocal.token}` },\r\n    });\r\n    toast.success(\"User updated successfully\");\r\n    navigate(\"/admin/users\");\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n//delete user\r\n\r\nconst adminRemoveUser = async (user) => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const result = await axios.delete(API_URL + user._id, {\r\n      headers: {\r\n        authorization: `Bearer ${userLocal.token}`,\r\n      },\r\n    });\r\n\r\n    toast.success(\"Product Deleted Successfully\");\r\n    window.location.reload();\r\n    return result?.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n//Dashboard summary for Admin\r\nconst summary = async () => {\r\n  try {\r\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n    const response = await axios.put(\"/api/v1/orders/summary\", {\r\n      headers: {\r\n        authorization: `Bearer ${userLocal.token}`,\r\n      },\r\n    });\r\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n    toast.success(\"User updated successfully\");\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// Logout user\r\nconst logout = () => {\r\n  localStorage.clear();\r\n  window.location.reload();\r\n};\r\n\r\nconst authService = {\r\n  register,\r\n  logout,\r\n  login,\r\n  updateProfile,\r\n  summary,\r\n  getAllUsers,\r\n  adminUpdateUser,\r\n  updateUser,\r\n  adminRemoveUser,\r\n};\r\n\r\nexport default authService;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}