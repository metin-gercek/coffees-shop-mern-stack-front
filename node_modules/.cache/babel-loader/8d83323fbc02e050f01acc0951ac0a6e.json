{"ast":null,"code":"import axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { getError } from \"utils\";\nconst API_URL = \"/api/v1/users/\"; // Register user\n\nconst register = async userData => {\n  const response = await axios.post(API_URL + \"signup\", userData);\n\n  if (response.data) {\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n  }\n\n  return response.data;\n}; // Login user\n\n\nconst login = async user => {\n  try {\n    const response = await axios.post(API_URL + \"signin\", user);\n\n    if (response.data) {\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\n    }\n\n    return response.data;\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; // Update User\n\n\nconst updateProfile = async user => {\n  try {\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\n    const response = await axios.put(API_URL + \"profile\", user, {\n      headers: {\n        'authorization': `Bearer ${userLocal.token}`\n      }\n    });\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n    toast.success('User updated successfully');\n    return response.data;\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; //Dashboard summary for Admin\n\n\nconst summary = async () => {\n  try {\n    const userLocal = JSON.parse(localStorage.getItem(\"user\"));\n    const response = await axios.put(\"/api/v1/orders/summary\", {\n      headers: {\n        'authorization': `Bearer ${userLocal.token}`\n      }\n    });\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n    toast.success('User updated successfully');\n  } catch (error) {\n    toast.error(getError(error));\n  }\n}; // Logout user\n\n\nconst logout = () => {\n  localStorage.clear();\n  window.location.reload(); //  localStorage.removeItem(\"user\");\n  //  localStorage.removeItem(\"cartItems\");\n  //  localStorage.removeItem(\"shippingAddress\");\n};\n\nconst authService = {\n  register,\n  logout,\n  login,\n  updateProfile,\n  summary\n};\nexport default authService;","map":{"version":3,"names":["axios","toast","getError","API_URL","register","userData","response","post","data","localStorage","setItem","JSON","stringify","login","user","error","updateProfile","userLocal","parse","getItem","put","headers","token","success","summary","logout","clear","window","location","reload","authService"],"sources":["C:/tiedostot/integrify/fs12-fullstack/client/src/features/Services/authService.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getError } from \"utils\";\r\n\r\nconst API_URL = \"/api/v1/users/\";\r\n\r\n// Register user\r\nconst register = async (userData) => {\r\n  const response = await axios.post(API_URL + \"signup\", userData);\r\n\r\n  if (response.data) {\r\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n  }\r\n\r\n  return response.data;\r\n};\r\n\r\n// Login user\r\nconst login = async (user) => {\r\n  try {\r\n    const response = await axios.post(API_URL + \"signin\", user);\r\n\r\n    if (response.data) {\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n    }\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    toast.error(getError(error));\r\n  }\r\n};\r\n\r\n// Update User\r\nconst updateProfile = async (user) => {\r\n\ttry {\r\n\t\tconst userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n\t\tconst response = await axios.put(API_URL + \"profile\", user, {\r\n\t\t\theaders: {\r\n\t\t\t\t'authorization': `Bearer ${userLocal.token}`,\r\n\t\t\t  },\r\n\t\t});\r\n\t\tlocalStorage.setItem(\"user\", JSON.stringify(response.data));\r\n\t\ttoast.success('User updated successfully');\r\n\t\treturn response.data;\r\n\t  } catch (error) {\r\n\t\ttoast.error(getError(error));\r\n\t  }\r\n}\r\n//Dashboard summary for Admin\r\nconst summary = async () => {\r\n\ttry {\r\n\t\tconst userLocal = JSON.parse(localStorage.getItem(\"user\"));\r\n\t\tconst response = await axios.put(\"/api/v1/orders/summary\", {\r\n\t\t\theaders: {\r\n\t\t\t\t'authorization': `Bearer ${userLocal.token}`,\r\n\t\t\t  },\r\n\t\t});\r\n\t\tlocalStorage.setItem(\"user\", JSON.stringify(response.data));\r\n\t\ttoast.success('User updated successfully');\r\n\t} catch (error) {\r\n\t\ttoast.error(getError(error));\r\n\t}\r\n}\r\n\r\n// Logout user\r\nconst logout = () => {\r\n\tlocalStorage.clear()\r\n\twindow.location.reload();\r\n//  localStorage.removeItem(\"user\");\r\n//  localStorage.removeItem(\"cartItems\");\r\n//  localStorage.removeItem(\"shippingAddress\");\r\n};\r\n\r\nconst authService = {\r\n  register,\r\n  logout,\r\n  login,\r\n  updateProfile,\r\n  summary\r\n};\r\n\r\nexport default authService;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}