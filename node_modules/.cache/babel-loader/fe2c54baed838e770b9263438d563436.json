{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  cartItems: localStorage.getItem('cartItems') ? JSON.parse(localStorage.getItem('cartItems')) : [],\n  paymentMethod: localStorage.getItem('paymentMethod') ? localStorage.getItem('paymentMethod') : {\n    paymentMethodName: '',\n    creditCard: {}\n  },\n  shippingAddress: localStorage.getItem('shippingAddress') ? JSON.parse(localStorage.getItem('shippingAddress')) : {}\n};\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    addToCart(state, action) {\n      const itemIndex = state.cartItems.findIndex(item => item._id === action.payload._id);\n\n      if (itemIndex >= 0) {\n        state.cartItems[itemIndex].quantity += 1;\n      } else {\n        const tempProduct = { ...action.payload,\n          quantity: 1\n        };\n        state.cartItems.push(tempProduct);\n      }\n\n      localStorage.setItem('cartItems', JSON.stringify(state.cartItems)); // const tempCart = state.cartItems.reduce((a,c) => a + c.quantity,0)\n      //  if(action.payload.countInStock < tempCart) {\n      //\twindow.alert('Sorry! Product is out of stock')\n      //  }\n    },\n\n    increaseCart(state, action) {\n      const itemIndex = state.cartItems.findIndex(item => item._id === action.payload._id);\n\n      if (state.cartItems[itemIndex].quantity >= 1) {\n        state.cartItems[itemIndex].quantity += 1;\n      }\n\n      localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\n    },\n\n    decreaseCart(state, action) {\n      const itemIndex = state.cartItems.findIndex(item => item._id === action.payload._id);\n\n      if (state.cartItems[itemIndex].quantity > 1) {\n        state.cartItems[itemIndex].quantity -= 1;\n      }\n\n      localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\n    },\n\n    removeFromCart(state, action) {\n      const newCartItems = state.cartItems.filter(cartItem => cartItem._id !== action.payload._id);\n      state.cartItems = newCartItems;\n      localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\n    },\n\n    clearAllCart(state, action) {\n      state.cartItems = [];\n      localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\n    },\n\n    saveShippingAddress(state, action) {\n      state.shippingAddress = action.payload;\n      localStorage.setItem('shippingAddress', JSON.stringify(state.shippingAddress));\n    },\n\n    deleteShippingAddress(state, action) {\n      state.shippingAddress = {};\n      localStorage.setItem('shippingAddress', JSON.stringify(state.shippingAddress));\n    },\n\n    savePaymentMethod(state, action) {\n      state.paymentMethod = action.payload;\n      localStorage.setItem('paymentMethod', JSON.stringify(state.paymentMethod));\n    }\n\n  }\n});\nexport const {\n  addToCart,\n  decreaseCart,\n  increaseCart,\n  removeFromCart,\n  clearAllCart,\n  saveShippingAddress,\n  deleteShippingAddress,\n  savePaymentMethod\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","cartItems","localStorage","getItem","JSON","parse","paymentMethod","paymentMethodName","creditCard","shippingAddress","cartSlice","name","reducers","addToCart","state","action","itemIndex","findIndex","item","_id","payload","quantity","tempProduct","push","setItem","stringify","increaseCart","decreaseCart","removeFromCart","newCartItems","filter","cartItem","clearAllCart","saveShippingAddress","deleteShippingAddress","savePaymentMethod","actions","reducer"],"sources":["C:/tiedostot/integrify/fs12-fullstack/client/src/features/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  cartItems: localStorage.getItem('cartItems') ? JSON.parse(localStorage.getItem('cartItems')) : [],\r\n\r\n  paymentMethod: localStorage.getItem('paymentMethod')\r\n  ? localStorage.getItem('paymentMethod')\r\n  : {\r\n\tpaymentMethodName: '',\r\n\tcreditCard: {}\r\n  },\r\n\r\n  shippingAddress: localStorage.getItem('shippingAddress') ? JSON.parse(localStorage.getItem('shippingAddress')) : {},\r\n\r\n  };\r\n\r\nconst cartSlice = createSlice({\r\n  name: \"cart\",\r\n  initialState,\r\n  reducers: {\r\n    addToCart(state, action) {\r\n      const itemIndex = state.cartItems.findIndex(\r\n        (item) => item._id === action.payload._id\r\n      );\r\n\r\n      if (itemIndex >= 0) {\r\n        state.cartItems[itemIndex].quantity += 1;\r\n      } else {\r\n        const tempProduct = { ...action.payload, quantity: 1 };\r\n        state.cartItems.push(tempProduct);\r\n      }\r\n\t  localStorage.setItem('cartItems', JSON.stringify(state.cartItems))\r\n      // const tempCart = state.cartItems.reduce((a,c) => a + c.quantity,0)\r\n      //  if(action.payload.countInStock < tempCart) {\r\n      //\twindow.alert('Sorry! Product is out of stock')\r\n      //  }\r\n    },\r\n\r\n    increaseCart(state, action) {\r\n      const itemIndex = state.cartItems.findIndex(\r\n        (item) => item._id === action.payload._id\r\n      );\r\n      if (state.cartItems[itemIndex].quantity >= 1) {\r\n        state.cartItems[itemIndex].quantity += 1;\r\n      }\r\n\t  localStorage.setItem('cartItems', JSON.stringify(state.cartItems))\r\n    },\r\n    decreaseCart(state, action) {\r\n      const itemIndex = state.cartItems.findIndex(\r\n        (item) => item._id === action.payload._id\r\n      );\r\n      if (state.cartItems[itemIndex].quantity > 1) {\r\n        state.cartItems[itemIndex].quantity -= 1;\r\n      }\r\n\t  localStorage.setItem('cartItems', JSON.stringify(state.cartItems))\r\n    },\r\n    removeFromCart(state, action) {\r\n      const newCartItems = state.cartItems.filter((cartItem) => cartItem._id !== action.payload._id)\r\n\t  state.cartItems = newCartItems\r\n\t  localStorage.setItem('cartItems', JSON.stringify(state.cartItems))\r\n      \r\n    },\r\n\tclearAllCart(state, action) {\r\n\t\tstate.cartItems = []\t\r\n\t\tlocalStorage.setItem('cartItems', JSON.stringify(state.cartItems))\r\n\t},\r\n\tsaveShippingAddress(state,action) {\r\n\t\tstate.shippingAddress = action.payload\r\n\t\tlocalStorage.setItem('shippingAddress', JSON.stringify(state.shippingAddress))\r\n\t},\r\n\tdeleteShippingAddress(state, action) {\r\n\t\tstate.shippingAddress = {}\r\n\t\tlocalStorage.setItem('shippingAddress', JSON.stringify(state.shippingAddress))\r\n\t},\r\n\tsavePaymentMethod(state,action) {\r\n\t\tstate.paymentMethod = action.payload\r\n\t\tlocalStorage.setItem('paymentMethod', JSON.stringify(state.paymentMethod))\r\n\t},\r\n  },\r\n}); \r\n\r\nexport const { addToCart, decreaseCart, increaseCart, removeFromCart, clearAllCart, saveShippingAddress, deleteShippingAddress, savePaymentMethod } = cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}